{% extends 'base.html.twig' %}

{% block title %}Grafik tygodniowy do edycji{% endblock %}

{% block body %}
    <h1>Grafik – aktualny tydzień {{ week }}</h1>

    <form method="post">
        <table>
            <thead>
            <tr>
                <th>Zatrudniony/a</th>
                <th>Pon</th>
                <th>Wt</th>
                <th>Śr</th>
                <th>Czw</th>
                <th>Pt</th>
                <th>Sob</th>
                <th>Nd</th>
            </tr>
            </thead>
            <tbody>
            {% for employee in employees %}
                <tr>
                    <td>{{ employee.name }} {{ employee.surname }}</td>
                    {% for day in 1..7 %}
                        <td>
                            <select id="shift" name="shift" onchange="toggleOtherShift(this.value)">
                                <option value="6:00-14:30">6:00-14:30</option>
                                <option value="14:30-23:00">14:30-23:00</option>
                                <option value="other">
                                    Inna
                                    <input type="text"
                                           name="shift_{{ employee.id }}_{{ day }}"
                                           value="{{ schedule[employee.id][day]|default('') }}"
                                           placeholder="np. 06:00-14:30"
                                           style="width: 100px;">
                                </option>
                            </select>

                        </td>
                    {% endfor %}
                </tr>
            {% endfor %}
            </tbody>
        </table>

        <br>
        <button type="submit">Zapisz zmiany</button>
        <button><a href="{{ path('report_week', {'week': week}) }}?pdf=true" target="_blank">Pobierz PDF</a></button>

        <script>
            function toggleOtherShift(val) {
                const other = document.getElementById('otherShift');
                other.style.display = (val === 'other') ? 'inline-block' : 'none';
            }
        </script>
    </form>
{% endblock %}
